<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏• - Rumor Tracking System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <h1>üîç ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ç‡πà‡∏≤‡∏ß‡∏•‡∏∑‡∏≠</h1>
            <div class="nav-links">
                <a href="{{ url_for('index') }}">‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏ß‡∏°‡∏Ç‡πà‡∏≤‡∏ß‡∏•‡∏∑‡∏≠</a>
                <a href="{{ url_for('summary') }}" class="active">‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="page-header">
            <h2>üìä ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</h2>
            <p class="subtitle">‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πà‡∏≤‡∏ß‡∏•‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ panic ‡πÅ‡∏•‡∏∞‡∏Ç‡πà‡∏≤‡∏ß‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß</p>
            <p class="section-note">
                <strong>‡∏Å‡∏é‡∏£‡∏∞‡∏ö‡∏ö:</strong> ‡∏Ç‡πà‡∏≤‡∏ß‡∏•‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô <strong>>= 5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</strong> ‡∏à‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ PANIC | 
                ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (‡∏£‡∏´‡∏±‡∏™ V001-V003) ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ
            </p>
        </div>

        <!-- Dashboard ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏° (‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏™‡∏∏‡∏î - ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ) -->
        <div class="stats-dashboard">
            <h3 class="section-title">üìà ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö</h3>
            <div class="stats-grid-dashboard">
                <a href="#panic-section" class="stat-card-link stat-danger">
                    <div class="stat-icon">üö®</div>
                    <div class="stat-number-large">{{ panic_count }}</div>
                    <div class="stat-label-large">‡∏Ç‡πà‡∏≤‡∏ß‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà PANIC</div>
                    <div class="stat-sublabel">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</div>
                </a>
                <a href="#verified-section" class="stat-card-link stat-success">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-number-large">{{ verified_count }}</div>
                    <div class="stat-label-large">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß</div>
                    <div class="stat-sublabel">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</div>
                </a>
                <a href="{{ url_for('index') }}" class="stat-card-link stat-warning">
                    <div class="stat-icon">‚è≥</div>
                    <div class="stat-number-large">{{ pending_count }}</div>
                    <div class="stat-label-large">‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</div>
                    <div class="stat-sublabel">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</div>
                </a>
                <a href="{{ url_for('index') }}" class="stat-card-link stat-info">
                    <div class="stat-icon">üì∞</div>
                    <div class="stat-number-large">{{ total_rumours }}</div>
                    <div class="stat-label-large">‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏Ç‡πà‡∏≤‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                    <div class="stat-sublabel">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                </a>
            </div>
            <p class="stats-note">‚úì ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà 1-3 ‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏Ç‡πà‡∏≤‡∏ß PANIC ‡∏≠‡∏≤‡∏à‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ)</p>
        </div>

        <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î -->
        <div class="stats-table-section">
            <h3 class="section-title">üìã ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</h3>
            <table class="stats-table">
                <thead>
                    <tr>
                        <th>‡∏£‡∏´‡∏±‡∏™‡∏Ç‡πà‡∏≤‡∏ß‡∏•‡∏∑‡∏≠</th>
                        <th>‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Ç‡πà‡∏≤‡∏ß</th>
                        <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                        <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</th>
                        <th>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠</th>
                        <th>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</th>
                        <th>‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</th>
                    </tr>
                </thead>
                <tbody>
                    {% for rumour in panic_rumours %}
                    <tr class="{% if rumour.is_verified %}row-verified{% else %}row-pending{% endif %}">
                        <td><strong>{{ rumour.rumour_id }}</strong></td>
                        <td class="cell-title">{{ rumour.title[:50] }}{% if rumour.title|length > 50 %}...{% endif %}</td>
                        <td>
                            <span class="badge-table badge-panic">PANIC</span>
                        </td>
                        <td class="cell-center">
                            <span class="badge-count">{{ rumour.report_count }}</span>
                        </td>
                        <td class="cell-center">
                            <span class="score-badge score-{{ 'low' if rumour.credibility_score < 30 else 'medium' if rumour.credibility_score < 60 else 'high' }}">
                                {{ rumour.credibility_score }}/100
                            </span>
                        </td>
                        <td>
                            {% if rumour.is_verified %}
                                <span class="badge-verified">‚úÖ {{ rumour.verification_result }}</span>
                            {% else %}
                                <span class="badge-pending">‚è≥ ‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</span>
                            {% endif %}
                        </td>
                        <td>
                            <a href="{{ url_for('detail', rumour_id=rumour.rumour_id) }}" class="btn-table">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="summary-section" id="panic-section">
            <h3 class="section-title section-danger">üö® ‡∏Ç‡πà‡∏≤‡∏ß‡∏•‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ PANIC</h3>
            <p class="section-note">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏Ç‡πà‡∏≤‡∏ß‡∏•‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô <strong>>= 5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</strong> ‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ PANIC ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</p>
            {% if panic_rumours %}
                <div class="rumour-feed" id="panic-feed">
                    {% for rumour in panic_rumours %}
                        <div class="rumour-card panic" data-index="{{ loop.index }}">
                            <div class="rumour-header">
                                <span class="rumour-id">‡∏£‡∏´‡∏±‡∏™: {{ rumour.rumour_id }}</span>
                                <span class="status-badge status-panic">PANIC</span>
                            </div>
                            
                            <h3 class="rumour-title">{{ rumour.title }}</h3>
                            
                            <div class="rumour-info">
                                <span>üì± ‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏≤: {{ rumour.source }}</span>
                                <span>üìÖ {{ rumour.created_date[:10] }}</span>
                                <span>‚≠ê ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: {{ rumour.credibility_score }}/100</span>
                            </div>
                            
                            <div class="rumour-stats">
                                <div class="stat">
                                    <span class="stat-number">{{ rumour.report_count }}</span>
                                    <span class="stat-label">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</span>
                                </div>
                                {% if rumour.is_verified %}
                                    <div class="verified-badge">
                                        <span class="badge-verified">‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß</span>
                                        {% if rumour.verification_result == '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ó‡πá‡∏à' %}
                                            <span class="badge-false">‚ùå ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ó‡πá‡∏à</span>
                                        {% elif rumour.verification_result == '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á' %}
                                            <span class="badge-true">‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á</span>
                                        {% endif %}
                                    </div>
                                {% endif %}
                            </div>
                            
                            <div class="card-footer">
                                <a href="{{ url_for('detail', rumour_id=rumour.rumour_id) }}" class="btn btn-primary btn-sm">
                                    ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‚Üí
                                </a>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                {% if panic_rumours|length > 3 %}
                    <button id="loadMorePanic" class="btn btn-load-more">üìÑ ‡∏î‡∏π‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° ({{ panic_rumours|length - 3 }} ‡∏Ç‡πà‡∏≤‡∏ß)</button>
                {% endif %}
            {% else %}
                <p class="no-data">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πà‡∏≤‡∏ß‡∏•‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ panic</p>
            {% endif %}
        </div>

        <div class="summary-section" id="verified-section">
            <h3 class="section-title section-success">‚úÖ ‡∏Ç‡πà‡∏≤‡∏ß‡∏•‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß</h3>
            
            {% if verified_rumours %}
                <div class="verified-list" id="verified-list">
                    {% for rumour in verified_rumours %}
                        <div class="verified-card" data-index="{{ loop.index }}">
                            <div class="rumour-header">
                                <span class="rumour-id">‡∏£‡∏´‡∏±‡∏™: {{ rumour.rumour_id }}</span>
                                <span class="status-badge status-panic">PANIC</span>
                            </div>
                            
                            <h4>{{ rumour.title }}</h4>
                            
                            <div class="verification-result">
                                <strong>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:</strong>
                                <span class="result-badge result-{{ rumour.verification_result }}">
                                    {{ rumour.verification_result }}
                                </span>
                            </div>
                            
                            <div class="rumour-info">
                                <span>üì± {{ rumour.source }}</span>
                                <span>üìÖ {{ rumour.created_date[:10] }}</span>
                                <span>üö® {{ rumour.report_count }} ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</span>
                            </div>
                            
                            <a href="{{ url_for('detail', rumour_id=rumour.rumour_id) }}" class="btn btn-sm">
                                ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
                            </a>
                        </div>
                    {% endfor %}
                </div>
                {% if verified_rumours|length > 2 %}
                    <button id="loadMoreVerified" class="btn btn-load-more">üìÑ ‡∏î‡∏π‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° ({{ verified_rumours|length - 2 }} ‡∏Ç‡πà‡∏≤‡∏ß)</button>
                {% endif %}
            {% else %}
                <p class="no-data">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πà‡∏≤‡∏ß‡∏•‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</p>
            {% endif %}
        </div>

        <a href="{{ url_for('index') }}" class="btn btn-secondary">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏ß‡∏°‡∏Ç‡πà‡∏≤‡∏ß‡∏•‡∏∑‡∏≠</a>
    </div>

    <footer>
        <p>‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ç‡πà‡∏≤‡∏ß‡∏•‡∏∑‡∏≠‡∏ö‡∏ô‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå | MVC Pattern | Exit Exam 2568</p>
    </footer>

    <script>
        // JavaScript ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° "‡∏î‡∏π‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°"
        document.addEventListener('DOMContentLoaded', function() {
            // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ 3 ‡∏Ç‡πà‡∏≤‡∏ß‡πÅ‡∏£‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö panic
            const panicCards = document.querySelectorAll('#panic-feed .rumour-card');
            panicCards.forEach((card, index) => {
                if (index >= 3) card.style.display = 'none';
            });

            // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ 2 ‡∏Ç‡πà‡∏≤‡∏ß‡πÅ‡∏£‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö verified
            const verifiedCards = document.querySelectorAll('#verified-list .verified-card');
            verifiedCards.forEach((card, index) => {
                if (index >= 2) card.style.display = 'none';
            });

            // ‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏π‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° panic
            const loadMorePanic = document.getElementById('loadMorePanic');
            if (loadMorePanic) {
                loadMorePanic.addEventListener('click', function() {
                    panicCards.forEach(card => card.style.display = 'block');
                    this.style.display = 'none';
                });
            }

            // ‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏π‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° verified
            const loadMoreVerified = document.getElementById('loadMoreVerified');
            if (loadMoreVerified) {
                loadMoreVerified.addEventListener('click', function() {
                    verifiedCards.forEach(card => card.style.display = 'block');
                    this.style.display = 'none';
                });
            }

            // Smooth scroll ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏¥‡∏á‡∏Ñ‡πå dashboard
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });
        });
    </script>
</body>
</html>
